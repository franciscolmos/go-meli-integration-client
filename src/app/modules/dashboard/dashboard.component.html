<ngx-spinner bdColor = "rgba(0,0,0,0.91)" size = "large" color = "#fff159" type = "pacman" [fullScreen] = "true"><p style="color: white" > Loading... </p></ngx-spinner>

<div class="container mb-5 mt-5" >
    <!-- TABLA ITEMS -->
    <h1>ITEMS</h1>
    <div class="mat-elevation-z8">
        <table mat-table [dataSource]="dataItems">
            <!-- Columna Nombre -->
            <ng-container matColumnDef="Title">
                <th mat-header-cell *matHeaderCellDef class="itemsColumn"> Nombre </th>
                <td mat-cell *matCellDef="let item" class="content"> {{item?.Title}} </td>
            </ng-container>
        
            <!-- Columna Cantidad -->
            <ng-container matColumnDef="Quantity">
                <th mat-header-cell *matHeaderCellDef class="itemsColumn"> Cantidad </th>
                <td mat-cell *matCellDef="let item" class="content"> {{item?.Quantity}} </td>
            </ng-container>
        
            <!-- Columna Precio -->
            <ng-container matColumnDef="Price">
                <th mat-header-cell *matHeaderCellDef class="itemsColumn"> Precio </th>
                <td mat-cell *matCellDef="let item" class="content">$ {{item?.Price}} </td>
            </ng-container>
        
            <!-- Columna Imagen -->
            <ng-container matColumnDef="FirstPicture">
                <th mat-header-cell *matHeaderCellDef class="itemsColumn"> imagen </th>
                <td mat-cell *matCellDef="let item" class="content"> <img src="{{item?.FirstPicture}}" alt="img"> </td>
            </ng-container>

             <!-- Columna Ver Item -->
             <ng-container matColumnDef="ViewItem">
                <th mat-header-cell *matHeaderCellDef class="itemsColumn"> Ver Publicaci√≥n </th>
                <td mat-cell *matCellDef="let item" class="content"> <a href="https://articulo.mercadolibre.com.ar/{{item?.Id}}-{{item?.Title}}" target="_blank">ver en ML</a> </td>
            </ng-container>
        
            <tr mat-header-row *matHeaderRowDef="displayedColumnsItems"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumnsItems;"></tr>
        </table>
        <mat-paginator [pageSizeOptions]="[5, 10, 20]" [pageSize]="5" showFirstLastButtons></mat-paginator>
    </div>
    <br>

    <!-- TABLA VENTAS -->
    <h1 class="mt-5">VENTAS</h1>
    <table mat-table [dataSource]="dataSalesOrders"  class="mat-elevation-z8">
        <!-- Columna Items -->
        <ng-container matColumnDef="Sold_Items">
            <th mat-header-cell *matHeaderCellDef class="salesColumn"> Items </th>
            <td mat-cell *matCellDef="let sale">
                <mat-accordion>
                    <mat-expansion-panel hideToggle>
                      <mat-expansion-panel-header>
                        <mat-panel-title>
                          Ver detalle
                        </mat-panel-title>
                      </mat-expansion-panel-header>
                        <div *ngFor="let item of sale.Sold_Items">
                            <p><b>Nombre: </b>{{item?.Title}}</p>
                            <p><b>Cantidad: </b>{{item?.Sold_Quantity}}</p>
                            <p><b>Precio: </b>{{item?.Unit_Price}}</p>
                            <p><b>Subtotal: </b>{{item?.Subtotal}}</p>
                        </div>
                    </mat-expansion-panel>
                </mat-accordion>
            </td>
        </ng-container>

        <!-- Columna Fecha -->
        <ng-container matColumnDef="Sale_date">
            <th mat-header-cell *matHeaderCellDef class="salesColumn"> Fecha </th>
            <td mat-cell *matCellDef="let sale" class="content"> {{sale?.Sale_date}} </td>
        </ng-container>

        <!-- Columna Total -->
        <ng-container matColumnDef="Total">
            <th mat-header-cell *matHeaderCellDef class="salesColumn"> Total </th>
            <td mat-cell *matCellDef="let sale" class="content">$ {{sale?.Total}} </td>
        </ng-container>

        <!-- Columna Total + Delivery -->
        <ng-container matColumnDef="Total_Delivery" >
            <th mat-header-cell *matHeaderCellDef class="salesColumn"> Total + delivery </th>
            <td mat-cell *matCellDef="let sale" class="content">$ {{sale?.Total_Delivery}} </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumnsSalesOrders"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumnsSalesOrders;"></tr>
    </table>

    <br>

    <!-- TABLA PREGUNTAS -->
    <h1 class="mt-5">PREGUNTAS</h1>
    <table mat-table [dataSource]="dataUnansweredQuestions"  class="mat-elevation-z8">
        <!-- Columna Fecha -->
        <ng-container matColumnDef="Question_date">
            <th mat-header-cell *matHeaderCellDef class="questionsColumn"> Fecha </th>
            <td mat-cell *matCellDef="let question" class="content"> {{question?.Question_date}} </td>
        </ng-container>

        <!-- Columna Ariculo -->
        <ng-container matColumnDef="Title">
            <th mat-header-cell *matHeaderCellDef class="questionsColumn"> Nombre </th>
            <td mat-cell *matCellDef="let question" class="content"> {{question?.Title}} </td>
        </ng-container>

        <!-- Columna Pregunta -->
        <ng-container matColumnDef="Question_text">
            <th mat-header-cell *matHeaderCellDef class="questionsColumn"> Pregunta </th>
            <td mat-cell *matCellDef="let question" class="content"> {{question?.Question_text}} </td>
        </ng-container>

        <!-- Columna Para responder Pregunta -->
        <ng-container matColumnDef="Id">
            <th mat-header-cell *matHeaderCellDef class="questionsColumn"> Responder </th>
            <td mat-cell *matCellDef="let question" class="content"><a target="_blank" href="/answer/{{question?.Id}}/{{question?.Question_text}}">Responder pregunta </a></td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumnsUnansweredQuestions"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumnsUnansweredQuestions;"></tr>
    </table>
</div>




